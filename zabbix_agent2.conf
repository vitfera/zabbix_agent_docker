# Configuração do Zabbix Agent 2
# Este arquivo define os parâmetros principais do agente

# PID file
PidFile=/tmp/zabbix_agent2.pid

# Log file
LogFile=/tmp/zabbix_agent2.log

# Log level (0-5, onde 4 é debug)
LogFileSize=1

# Servidor Zabbix para verificações passivas
Server=${ZBX_SERVER_HOST}

# Porta de escuta para verificações passivas  
ListenPort=10050

# Servidor Zabbix para verificações ativas
ServerActive=${ZBX_SERVER_HOST}:${ZBX_SERVER_PORT}

# Nome do host
Hostname=${ZBX_HOSTNAME}

# Timeout para conexões
Timeout=30

# Permitir comandos remotos
AllowRoot=1

# Include de arquivos de configuração de plugins
Include=/etc/zabbix/zabbix_agent2.d/plugins.d/*.conf

# Parâmetros customizados do usuário
UnsafeUserParameters=${ZBX_UNSAFEUSERPARAMETERS}

# Configurações para Docker
UserParameter=docker.containers.running,docker ps -q | wc -l
UserParameter=docker.containers.total,docker ps -aq | wc -l
UserParameter=docker.images.total,docker images -q | wc -l

# Debug level
DebugLevel=${ZBX_DEBUGLEVEL}

# Buffer size
BufferSize=100

# Control socket for service manager
ControlSocket=/tmp/agent.sock